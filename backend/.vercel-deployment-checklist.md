# Vercel Deployment Checklist

Use this checklist to ensure a smooth deployment.

## Pre-Deployment Setup

### Database Setup
- [ ] Choose database provider (Vercel Postgres/Supabase/Neon)
- [ ] Create PostgreSQL database
- [ ] Copy DATABASE_URL connection string
- [ ] Save DATABASE_URL securely

### Local Testing
- [ ] Install dependencies: `yarn install`
- [ ] Update .env with DATABASE_URL
- [ ] Generate Prisma client: `yarn db:generate`
- [ ] Create migration: `npx prisma migrate dev --name init`
- [ ] Test locally: `yarn dev`
- [ ] Test health endpoint: `curl http://localhost:3001/health`
- [ ] Test API endpoints with Postman/curl

### Vercel Setup
- [ ] Install Vercel CLI: `npm install -g vercel`
- [ ] Create Vercel account (if needed)
- [ ] Login to Vercel: `vercel login`

## Deployment

### Initial Deploy
- [ ] Navigate to backend: `cd backend`
- [ ] Run deployment: `vercel --prod`
- [ ] Note the deployment URL
- [ ] Save deployment URL for frontend

### Environment Variables
- [ ] Add DATABASE_URL: `vercel env add DATABASE_URL`
- [ ] Select all environments (Production, Preview, Development)
- [ ] Verify variables: `vercel env ls`

### Redeploy with Variables
- [ ] Redeploy: `vercel --prod`
- [ ] Wait for deployment to complete
- [ ] Check deployment logs for errors

## Post-Deployment Verification

### Backend Testing
- [ ] Test health endpoint: `curl https://YOUR-URL.vercel.app/health`
- [ ] Test business endpoint: Create a business via API
- [ ] Test employee endpoint: Create an employee via API
- [ ] Test shift endpoint: Create a shift via API
- [ ] Verify data in Prisma Studio or database GUI

### Frontend Integration
- [ ] Update API_BASE_URL in frontend code
- [ ] Test frontend connection to backend
- [ ] Test all CRUD operations from mobile app
- [ ] Test on both iOS and Android (if applicable)
- [ ] Test error handling
- [ ] Test loading states

### Monitoring
- [ ] Check Vercel dashboard for deployment status
- [ ] Review deployment logs: `vercel logs`
- [ ] Monitor for errors in first few hours
- [ ] Set up alerts (optional)

## Production Readiness

### Security
- [ ] Review CORS settings (restrict origins if needed)
- [ ] Ensure sensitive data not in logs
- [ ] Verify environment variables are secure
- [ ] Check database security settings

### Performance
- [ ] Test API response times
- [ ] Check cold start performance
- [ ] Consider connection pooling for database
- [ ] Monitor Vercel usage/limits

### Documentation
- [ ] Document production URL
- [ ] Update README with deployment info
- [ ] Share API documentation with team
- [ ] Document any custom configurations

## Optional Enhancements

### Advanced Setup
- [ ] Set up custom domain
- [ ] Configure CI/CD (auto-deploy on push)
- [ ] Add error monitoring (Sentry)
- [ ] Add analytics
- [ ] Set up staging environment
- [ ] Add rate limiting
- [ ] Implement caching strategy

### Database
- [ ] Set up automated backups
- [ ] Configure connection pooling
- [ ] Set up read replicas (if needed)
- [ ] Monitor database performance

## Troubleshooting Reference

### Common Issues

**Build Fails**
- [ ] Check Vercel build logs
- [ ] Verify package.json scripts
- [ ] Ensure all dependencies are listed

**Database Connection Fails**
- [ ] Verify DATABASE_URL is set
- [ ] Check database is accessible
- [ ] Test connection string locally
- [ ] Check database firewall rules

**API Routes Don't Work**
- [ ] Verify vercel.json configuration
- [ ] Check route definitions
- [ ] Review deployment logs
- [ ] Test with curl/Postman

**Cold Starts Are Slow**
- [ ] Expected for free tier
- [ ] Consider Vercel Pro
- [ ] Implement connection pooling
- [ ] Optimize imports

## Rollback Plan

If something goes wrong:
- [ ] Note the working deployment URL
- [ ] Keep previous deployment available
- [ ] Know how to rollback: `vercel rollback`
- [ ] Have database backup ready

## Success Criteria

Deployment is successful when:
- [ ] Health endpoint returns 200 OK
- [ ] All API endpoints work correctly
- [ ] Frontend can connect and perform operations
- [ ] No errors in Vercel logs
- [ ] Database operations work
- [ ] App tested on real devices

## Post-Launch

### First 24 Hours
- [ ] Monitor error rates
- [ ] Check performance metrics
- [ ] Gather user feedback
- [ ] Fix critical issues immediately

### First Week
- [ ] Review usage patterns
- [ ] Optimize slow endpoints
- [ ] Add missing features
- [ ] Update documentation

### Ongoing
- [ ] Regular security updates
- [ ] Monitor costs
- [ ] Performance optimization
- [ ] Feature additions

---

## Quick Commands Reference

```bash
# Deploy
vercel --prod

# View logs
vercel logs

# List deployments
vercel ls

# Add environment variable
vercel env add VARIABLE_NAME

# Rollback
vercel rollback

# Open in browser
vercel open
```

---

**Last Updated**: Check this list before each deployment!

